(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{182:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("wox的配置主要配置在主项目上，通过以下文件格式来指定：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("config.${env}.(json|js)")]),s._v(" 项目配置")]),s._v(" "),a("li",[a("code",[s._v("plugin.json")]),s._v(" 插件列表")]),s._v(" "),a("li",[a("code",[s._v("plugin.${env}.json")]),s._v(" 插件配置")])]),s._v(" "),a("p",[s._v("它们都存放在"),a("code",[s._v("/config/")]),s._v("文件夹下。"),a("code",[s._v("env")]),s._v("则是自定义环境的变量。")]),s._v(" "),a("h2",{attrs:{id:"项目配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 项目配置")]),s._v(" "),a("p",[s._v("它有两种格式结尾"),a("code",[s._v(".json``.js")]),s._v("，如果两种格式都存在，那么将使用"),a("code",[s._v("Object.assign")]),s._v("来自动合并配置。")]),s._v(" "),a("h3",{attrs:{id:"系统配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 系统配置")]),s._v(" "),a("p",[s._v("用于设定项目整体（宏观）的功能。它主要有一下的配置参数：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("mode")]),s._v(" "),a("code",[s._v("string")]),s._v(" history监听模式。")]),s._v(" "),a("li",[a("strong",[s._v("el")]),s._v(" "),a("code",[s._v("HTMLElement|string")]),s._v(" 渲染节点。")]),s._v(" "),a("li",[a("strong",[s._v("url")]),s._v(" "),a("code",[s._v("string")]),s._v(" 默认跳转链接。")])]),s._v(" "),a("p",[s._v("监听模式主要分"),a("code",[s._v("hash")]),s._v("与"),a("code",[s._v("html5")]),s._v("，分别对应"),a("code",[s._v("hashchange")]),s._v("与"),a("code",[s._v("popstate")]),s._v("，这两种模式在前端最为常用，而"),a("code",[s._v("hashchange")]),s._v("几乎全部支持。")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：当我们定义为 "),a("code",[s._v("mode: 'html5'")]),s._v(" 的时候，但是浏览器不支持"),a("code",[s._v("popstate")]),s._v("模式，那么将会自动降级为"),a("code",[s._v("mode:'hash'")]),s._v("。")])]),s._v(" "),a("h4",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash","aria-hidden":"true"}},[s._v("#")]),s._v(" Hash")]),s._v(" "),a("p",[s._v('hash即URL中"#"字符后面的部分。')]),s._v(" "),a("ol",[a("li",[s._v("使用浏览器访问网页时，如果网页URL中带有hash，页面就会定位到id（或name）与hash值一样的元素的位置；")]),s._v(" "),a("li",[s._v("hash还有另一个特点，它的改变不会导致页面重新加载；")]),s._v(" "),a("li",[s._v("hash值浏览器是不会随请求发送到服务器端的；")]),s._v(" "),a("li",[s._v("通过window.location.hash属性获取和设置hash值。")])]),s._v(" "),a("p",[a("code",[s._v("window.location.hash")]),s._v("值的变化会直接反应到浏览器地址栏（#后面的部分会发生变化），同时，浏览器地址栏hash值的变化也会触发"),a("code",[s._v("window.location.hash")]),s._v("值的变化，从而触发"),a("code",[s._v("onhashchange")]),s._v("事件。")]),s._v(" "),a("p",[s._v("hashchange事件（IE8已支持该事件）")]),s._v(" "),a("ol",[a("li",[s._v("当URL的片段标识符更改时，将触发hashchange事件（跟在#符号后面的URL部分，包括#符号）")]),s._v(" "),a("li",[s._v("hashchange事件触发时，事件对象会有hash改变前的URL（oldURL）和hash改变后的URL（newURL）两个属性")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hashchange'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("oldURL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("newURL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("我们将这种类型定义为"),a("code",[s._v("hash")]),s._v("类型。")]),s._v(" "),a("h4",{attrs:{id:"popstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#popstate","aria-hidden":"true"}},[s._v("#")]),s._v(" Popstate")]),s._v(" "),a("p",[s._v("Popstate相关的内容包含三个东西：2个api和一个事件。2个api分别是"),a("code",[s._v("history.pushState")]),s._v("和"),a("code",[s._v("history.replaceState")]),s._v("，1个事件是指"),a("code",[s._v("window.onpopstate")]),s._v("事件。"),a("code",[s._v("pushState")]),s._v("提供给我们的是一种在不改变网页内容的前提下，操作浏览器历史记录的能力。"),a("code",[s._v("history.pushState")]),s._v("和"),a("code",[s._v("history.replaceState")]),s._v("都不会触发"),a("code",[s._v("popstate")]),s._v("事件。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stateObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我们将这种类型定义为"),a("code",[s._v("html5")]),s._v("类型。")]),s._v(" "),a("h3",{attrs:{id:"自定义配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 自定义配置")]),s._v(" "),a("p",[s._v("除了系统配置之外，你可以自定义一些配置（无格式要求），你可以通过一下的方式拿到这些配置，这样有利于整体上的配置：")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"插件列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件列表","aria-hidden":"true"}},[s._v("#")]),s._v(" 插件列表")]),s._v(" "),a("p",[s._v("插件列表主要记录着插件的加载状态与加载顺序。它主要分一下几个参数配置：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("enable")]),s._v(" "),a("code",[s._v("boolean|undefined")]),s._v(" 是否启用插件。当为"),a("code",[s._v("undefined")]),s._v("的时候，默认为"),a("code",[s._v("true")]),s._v("。")]),s._v(" "),a("li",[a("strong",[s._v("env")]),s._v(" "),a("code",[s._v("string|Array<string>|undefined")]),s._v(" 限定插件加载的环境变量或者变量列表。当为"),a("code",[s._v("undedined")]),s._v("的时候，默认加载。")]),s._v(" "),a("li",[a("strong",[s._v("dependencies")]),s._v(" "),a("code",[s._v("string|Array<string>|undefined")]),s._v(" 设定插件加载的依赖，可以理解为前置插件必须存在。它可以是一个插件名，也可以是一个插件名所组成的列表。当为"),a("code",[s._v("undefined")]),s._v("的时候，不依赖任何插件，加载优先级最高。")]),s._v(" "),a("li",[a("strong",[s._v("path")]),s._v(" "),a("code",[s._v("string|undefined")]),s._v(" 这个选项只在开发模式下有效，表示插件的开发目录，建议开发插件的时候，将插件目录位于主项目下开发，"),a("code",[s._v("path")]),s._v("指向插件文件夹。")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：插件的加载与参数改变必须重启项目的webpack。")])]),s._v(" "),a("h2",{attrs:{id:"插件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 插件配置")]),s._v(" "),a("p",[s._v("插件相当于一个个的微服务，插件的配置相当于不同服务的配置。我们可以理解为一个插件为一个类似的"),a("code",[s._v("UI Component")]),s._v("，那么它具有输入与输出的"),a("code",[s._v("I/O")]),s._v("模型。我们提倡完成考虑插件的通用型，所以需要将可变的部分通过参数的模式暴露出来，可供用户修改。")]),s._v(" "),a("p",[s._v("比如我们插件需要使用到请求，那么请求的通用配置可以提炼出来让用户配置：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ajax"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://example.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"headers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Authorization"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"basic eulcxna89=="')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("用户在制作插件的时候可以通过如下的方法拿到参数配置：")]),s._v(" "),a("p",[s._v("文件位于："),a("em",[s._v("/app.js")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" plugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("plugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：在制作插件的时候，通常我们会提供一个配置参数的列表文件("),a("code",[s._v("/.wox.config.json")]),s._v(")，供安装时候系统自动将此文件内容注入到主项目中。")])])])}],!1,null,null,null);t.default=e.exports}}]);